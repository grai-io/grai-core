"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.loadConfigAndPlugins = loadConfigAndPlugins;

var _loadConfigAndPlugins = require("../../../bootstrap/load-config-and-plugins");

var _redux = require("../../../redux");

var _apiRunnerNode = _interopRequireDefault(require("../../api-runner-node"));

async function loadConfigAndPlugins(...args) {
  const [{
    siteDirectory,
    program
  }] = args;

  _redux.store.dispatch({
    type: `SET_PROGRAM`,
    payload: { ...program,
      directory: siteDirectory
    }
  });

  await (0, _loadConfigAndPlugins.loadConfigAndPlugins)(...args); // Cache is already initialized

  if ("4" === `4`) {
    await (0, _apiRunnerNode.default)(`onPluginInit`);
  } else {
    await (0, _apiRunnerNode.default)(`unstable_onPluginInit`);
  }
}
//# sourceMappingURL=load-config-and-plugins.js.map